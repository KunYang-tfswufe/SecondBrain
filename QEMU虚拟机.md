---
tags:
  - 虚拟化
  - 计算机底层
  - Linux
  - 工具
aliases:
  - QEMU
  - Quick Emulator
创建日期: 2025-08-05
更新日期: 2025-08-05
来源: "[[我的个人主页]]"
---

# QEMU 虚拟机

> [!NOTE] 核心定义
> **QEMU** (Quick Emulator) 是一个强大的、开源的机器模拟器和虚拟化器。它可以通过动态二进制翻译来模拟各种不同的硬件架构。

## 主要特点

- **跨平台模拟**：可以在一个平台（如 x86）上模拟另一个平台（如 ARM），并运行其操作系统。
- **多种模拟模式**：支持系统模式和用户模式。
- **硬件支持广泛**：可以模拟 CPU、内存、磁盘、网卡等多种硬件设备。
- **开源免费**：由社区驱动开发，免费使用。

## 两种工作模式

1.  **系统模式 (System Emulation)**
    - 模拟一个完整的计算机系统，包括 CPU 和各种外围设备。
    - 可以在这个模拟的系统上运行未经修改的操作系统。
    - 这是我们通常所说的“虚拟机”模式。

2.  **用户模式 (User-mode Emulation)**
    - 仅模拟 CPU，允许为一个 CPU 编译的程序在另一个 CPU 上运行。
    - 例如，在 x86 架构的 Linux 系统上运行为 ARM 编译的程序。

## 与 KVM 的关系

> [!TIP] QEMU + KVM = 高性能虚拟化
> - **QEMU** 本身是纯软件模拟，性能较低，因为它需要翻译每一条指令。
> - **[[KVM]]** (Kernel-based Virtual Machine) 是 Linux 内核的一个模块，它利用硬件虚拟化技术（如 Intel VT-x 或 AMD-V）来提供接近本机的性能。
>
> 在实践中，**QEMU 经常与 KVM 结合使用**：QEMU 负责模拟主板、磁盘、网卡等硬件设备，而 CPU 和内存的执行则交由 KVM 通过硬件辅助来完成，从而获得极高的性能。
>
> **简单比喻**：KVM 是“发动机核心”，QEMU 则是“车身和方向盘”。

## 常用命令示例

> [!EXAMPLE] 创建一个虚拟机并运行
> ```bash
> # 1. 创建一个 10G 大小的 qcow2 格式磁盘镜像
> qemu-img create -f qcow2 my_vm_disk.qcow2 10G
> 
> # 2. 启动虚拟机，使用 my_os.iso 安装盘进行安装
> qemu-system-x86_64 \
>   -m 2048 \ # 分配 2GB 内存
>   -hda my_vm_disk.qcow2 \ # 将镜像作为主硬盘
>   -cdrom path/to/my_os.iso \ # 加载 ISO 安装盘
>   -boot d \ # 从 CD-ROM 启动
>   -enable-kvm # 启用 KVM 加速
> ```

---
### 关联概念
- [[KVM]]
- [[虚拟化技术]]
- [[Docker]] (容器化技术，可作对比)
- [[CPU架构]]